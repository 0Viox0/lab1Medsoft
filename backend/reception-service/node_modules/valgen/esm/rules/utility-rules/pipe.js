import { validator, } from '../../core/index.js';
/**
 *
 * @validator pipe
 */
export function pipe(rules, options) {
    const l = rules.length;
    const returnIndex = options?.returnIndex;
    return validator('pipe', (input, context) => {
        let i;
        let c;
        let v = input;
        let returnValue = input;
        const oldErrors = context.errors.length;
        for (i = 0; i < l; i++) {
            c = rules[i];
            v = c(v, context);
            if (returnIndex == null || i <= returnIndex)
                returnValue = v;
            if (context.errors.length > oldErrors)
                return;
        }
        return returnValue;
    }, options);
}
