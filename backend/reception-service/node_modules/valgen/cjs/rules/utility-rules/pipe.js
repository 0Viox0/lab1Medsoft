"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.pipe = pipe;
const index_js_1 = require("../../core/index.js");
/**
 *
 * @validator pipe
 */
function pipe(rules, options) {
    const l = rules.length;
    const returnIndex = options?.returnIndex;
    return (0, index_js_1.validator)('pipe', (input, context) => {
        let i;
        let c;
        let v = input;
        let returnValue = input;
        const oldErrors = context.errors.length;
        for (i = 0; i < l; i++) {
            c = rules[i];
            v = c(v, context);
            if (returnIndex == null || i <= returnIndex)
                returnValue = v;
            if (context.errors.length > oldErrors)
                return;
        }
        return returnValue;
    }, options);
}
