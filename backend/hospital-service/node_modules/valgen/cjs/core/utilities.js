"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.forwardRef = forwardRef;
exports.iif = iif;
const validator_js_1 = require("./validator.js");
/**
 * Forwards codec process to a sub codec. Useful for circular checks
 * @validator forwardRef
 */
function forwardRef(fn) {
    return (0, validator_js_1.validator)('forwardRef', (input, context) => {
        const nested = fn(context);
        return nested(input, context);
    });
}
function iif(check, _then, _else) {
    return (0, validator_js_1.validator)('iif', (input, context) => {
        let c = _else;
        try {
            if (check(input) !== undefined)
                c = _then;
        }
        catch {
            // ignored
        }
        if ((0, validator_js_1.isValidator)(c))
            return c(input, context);
        return c;
    });
}
